<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0070)https://web.cs.ucla.edu/classes/fall23/cs31/Projects/7/basictests.html -->
<html xmlns="http://www.w3.org/1999/xhtml" data-darkreader-mode="dynamic" data-darkreader-scheme="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><style class="darkreader darkreader--fallback" media="screen"></style><style class="darkreader darkreader--text" media="screen"></style><style class="darkreader darkreader--invert" media="screen">.jfk-bubble.gtx-bubble, .captcheck_answer_label > input + img, span#closed_text > img[src^="https://www.gstatic.com/images/branding/googlelogo"], span[data-href^="https://www.hcaptcha.com/"] > #icon, #bit-notification-bar-iframe, ::-webkit-calendar-picker-indicator {
    filter: invert(100%) hue-rotate(180deg) contrast(90%) !important;
}</style><style class="darkreader darkreader--inline" media="screen">[data-darkreader-inline-bgcolor] {
  background-color: var(--darkreader-inline-bgcolor) !important;
}
[data-darkreader-inline-bgimage] {
  background-image: var(--darkreader-inline-bgimage) !important;
}
[data-darkreader-inline-border] {
  border-color: var(--darkreader-inline-border) !important;
}
[data-darkreader-inline-border-bottom] {
  border-bottom-color: var(--darkreader-inline-border-bottom) !important;
}
[data-darkreader-inline-border-left] {
  border-left-color: var(--darkreader-inline-border-left) !important;
}
[data-darkreader-inline-border-right] {
  border-right-color: var(--darkreader-inline-border-right) !important;
}
[data-darkreader-inline-border-top] {
  border-top-color: var(--darkreader-inline-border-top) !important;
}
[data-darkreader-inline-boxshadow] {
  box-shadow: var(--darkreader-inline-boxshadow) !important;
}
[data-darkreader-inline-color] {
  color: var(--darkreader-inline-color) !important;
}
[data-darkreader-inline-fill] {
  fill: var(--darkreader-inline-fill) !important;
}
[data-darkreader-inline-stroke] {
  stroke: var(--darkreader-inline-stroke) !important;
}
[data-darkreader-inline-outline] {
  outline-color: var(--darkreader-inline-outline) !important;
}
[data-darkreader-inline-stopcolor] {
  stop-color: var(--darkreader-inline-stopcolor) !important;
}</style><style class="darkreader darkreader--variables" media="screen">:root {
   --darkreader-neutral-background: #131516;
   --darkreader-neutral-text: #d8d4cf;
   --darkreader-selection-background: #004daa;
   --darkreader-selection-text: #e8e6e3;
}</style><style class="darkreader darkreader--root-vars" media="screen"></style><style class="darkreader darkreader--user-agent" media="screen">html {
    background-color: #181a1b !important;
}
html {
    color-scheme: dark !important;
}
html, body {
    background-color: #181a1b;
}
html, body {
    border-color: #736b5e;
    color: #e8e6e3;
}
a {
    color: #3391ff;
}
table {
    border-color: #545b5e;
}
::placeholder {
    color: #b2aba1;
}
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
    background-color: #404400 !important;
    color: #e8e6e3 !important;
}
::-webkit-scrollbar {
    background-color: #202324;
    color: #aba499;
}
::-webkit-scrollbar-thumb {
    background-color: #454a4d;
}
::-webkit-scrollbar-thumb:hover {
    background-color: #575e62;
}
::-webkit-scrollbar-thumb:active {
    background-color: #484e51;
}
::-webkit-scrollbar-corner {
    background-color: #181a1b;
}
::selection {
    background-color: #004daa !important;
    color: #e8e6e3 !important;
}
::-moz-selection {
    background-color: #004daa !important;
    color: #e8e6e3 !important;
}</style>
 <title>Project 7 Basic Tests</title>
<meta name="darkreader" content="cac9a20408174d9a972374ad47e52390"><style class="darkreader darkreader--override" media="screen">.vimvixen-hint {
    background-color: #7b5300 !important;
    border-color: #d8b013 !important;
    color: #f3e8c8 !important;
}
#vimvixen-console-frame {
    color-scheme: light !important
}
::placeholder {
    opacity: 0.5 !important;
}
#edge-translate-panel-body,
.MuiTypography-body1,
.nfe-quote-text {
    color: var(--darkreader-neutral-text) !important;
}
gr-main-header {
    background-color: #0f3a48 !important;
}
.tou-z65h9k,
.tou-mignzq,
.tou-1b6i2ox,
.tou-lnqlqk {
    background-color: var(--darkreader-neutral-background) !important;
}
.tou-75mvi {
    background-color: #032029 !important;
}
.tou-ta9e87,
.tou-1w3fhi0,
.tou-1b8t2us,
.tou-py7lfi,
.tou-1lpmd9d,
.tou-1frrtv8,
.tou-17ezmgn {
    background-color: #0a0a0a !important;
}
.tou-uknfeu {
    background-color: #231603 !important;
}
.tou-6i3zyv {
    background-color: #19576c !important;
}
div.mermaid-viewer-control-panel .btn {
  fill: var(--darkreader-neutral-text);
  background-color: var(--darkreader-neutral-background);
}
svg g rect.er {
  fill: var(--darkreader-neutral-background) !important;
}
svg g rect.er.entityBox {
  fill: var(--darkreader-neutral-background) !important;
}
svg g rect.er.attributeBoxOdd {
  fill: var(--darkreader-neutral-background) !important;
}
svg g rect.er.attributeBoxEven {
  fill-opacity: 0.8 !important;
  fill: var(--darkreader-selection-background);
}
svg rect.er.relationshipLabelBox {
  fill: var(--darkreader-neutral-background) !important;
}
svg g g.nodes rect, svg g g.nodes polygon {
  fill: var(--darkreader-neutral-background) !important;
}
svg g rect.task {
  fill: var(--darkreader-selection-background) !important;
}
svg line.messageLine0, svg line.messageLine1 {
  stroke: var(--darkreader-neutral-text) !important;
}
div.mermaid .actor {
  fill: var(--darkreader-neutral-background) !important;
}
embed[type="application/pdf"][src="about:blank"] { filter: invert(100%) contrast(90%); }</style></head>
<body>
<h2>Project 7 Basic Tests</h2>
<p>
If you precede your main routine with the declaration
<code>void doBasicTests();</code>, add the following as the first two lines
of <code>main</code>:
</p>
<pre>	doBasicTests(); // Remove this line after completing test.
	return 0;       // Remove this line after completing test.
</pre>
append the following to your <code>toot.cpp</code> file, and build and run
your program under g31, you will test a number of basic aspects of your code.
<p></p>
<pre>#include &lt;type_traits&gt;
#include &lt;cassert&gt;

#define CHECKTYPE(c, f, r, a)  \
    static_assert(std::is_same&lt;decltype(&amp;c::f), r (c::*)a&gt;::value, \
       "FAILED: You changed the type of " #c "::" #f);  \
    { [[gnu::unused]] auto p = static_cast&lt;r(c::*)a&gt;(&amp;c::f); }

void thisFunctionWillNeverBeCalled()
{
      // If the student deleted or changed the interfaces to the public
      // functions, this won't compile.  (This uses magic beyond the scope
      // of CS 31.)

    Tooter(static_cast&lt;City*&gt;(0), 1, 1);
    CHECKTYPE(Tooter, row, int, () const);
    CHECKTYPE(Tooter, col, int, () const);
    CHECKTYPE(Tooter, move, void, ());

    Player(static_cast&lt;City*&gt;(0), 1, 1);
    CHECKTYPE(Player, row, int, () const);
    CHECKTYPE(Player, col, int, () const);
    CHECKTYPE(Player, age, int, () const);
    CHECKTYPE(Player, health, int, () const);
    CHECKTYPE(Player, isPassedOut, bool, () const);
    CHECKTYPE(Player, preach, void, ());
    CHECKTYPE(Player, move, void, (int));
    CHECKTYPE(Player, getGassed, void, ());

    City(1, 1);
    CHECKTYPE(City, rows, int, () const);
    CHECKTYPE(City, cols, int, () const);
    CHECKTYPE(City, player, Player*, () const);
    CHECKTYPE(City, isPlayerAt, bool, (int,int) const);
    CHECKTYPE(City, tooterCount, int, () const);
    CHECKTYPE(City, nTootersAt, int, (int,int) const);
    CHECKTYPE(City, determineNewPosition, bool, (int&amp;,int&amp;,int) const);
    CHECKTYPE(City, display, void, () const);
    CHECKTYPE(City, addTooter, bool, (int,int));
    CHECKTYPE(City, addPlayer, bool, (int,int));
    CHECKTYPE(City, preachToTootersAroundPlayer, void, ());
    CHECKTYPE(City, moveTooters, void, ());

    Game(1, 1, 1);
    CHECKTYPE(Game, play, void, ());
}

void doBasicTests()
{
    {
        City walk(10, 20);
        assert(walk.addPlayer(2, 6));
        Player* pp = walk.player();
        assert(walk.isPlayerAt(2, 6)  &amp;&amp; ! pp-&gt;isPassedOut());
        pp-&gt;move(UP);
        assert(walk.isPlayerAt(1, 6)  &amp;&amp; ! pp-&gt;isPassedOut());
        pp-&gt;move(UP);
        assert(walk.isPlayerAt(1, 6)  &amp;&amp; ! pp-&gt;isPassedOut());
        for (int k = 1; k &lt;= 11; k++)
            pp-&gt;getGassed();
        assert(! pp-&gt;isPassedOut());
        pp-&gt;getGassed();
        assert(pp-&gt;isPassedOut());
    }
    {
        City ofAngels(2, 2);
        assert(ofAngels.addPlayer(1, 1));
        assert(ofAngels.addTooter(2, 2));
        Player* pp = ofAngels.player();
        ofAngels.moveTooters();
        assert( ! pp-&gt;isPassedOut());
        for (int k = 0; k &lt; 1000  &amp;&amp; ! pp-&gt;isPassedOut(); k++)
            ofAngels.moveTooters();
        assert(pp-&gt;isPassedOut());
    }
    {
        City ousDarth(2, 2);
        assert(ousDarth.addPlayer(1, 1));
        for (int k = 0; k &lt; 50; k++)
        {
            assert(ousDarth.addTooter(1, 2));
            assert(ousDarth.addTooter(2, 2));
        }
        ousDarth.preachToTootersAroundPlayer();
        assert(ousDarth.nTootersAt(1, 1) == 0);
        assert(ousDarth.nTootersAt(2, 1) == 0);
        for (int r = 1; r &lt;= 2; r++)
        {     // .9999 probability that between 5 and 29 out of 50 are unconverted
            int n = ousDarth.nTootersAt(r, 2);
            assert(n &gt;= 5  &amp;&amp;  n &lt;= 29);
        }
        int m = ousDarth.nTootersAt(1, 2);
        ousDarth.addTooter(1, 2);
        assert(ousDarth.nTootersAt(1, 2) == m+1);
    }
    {
        City univer(5, 20);
        univer.addPlayer(3, 3);
        int r = 1;
        int c = 1;
        for (int k = 1; k &lt;= 5*5; k++)
        {
            if (r != 3 || c != 3)
                univer.addTooter(r, c);
            if (r == 5)
            {
                r = c+1;
                c = 5;
            }
            else if (c == 1)
            {
                c = r + 1;
                r = 1;
            }
            else
            {
                c--;
                r++;
            }
        }
        assert(univer.tooterCount() == 24);
        for (int k = 0; k &lt; 1000  &amp;&amp; univer.tooterCount() &gt; 16; k++)
            univer.preachToTootersAroundPlayer();
        assert(univer.tooterCount() == 16);
        for (int r = 1; r &lt;= 5; r++)
        {
            for (int c = 1; c &lt;= 5; c++)
            {
                int expected = 1;
                if (r &gt;= 2  &amp;&amp;  r &lt;= 4  &amp;&amp;  c &gt;= 2  &amp;&amp;  c &lt;= 4)
                    expected = 0;
                assert(univer.nTootersAt(r, c) == expected);
            }
        }
        univer.addTooter(3, 2);
        assert(univer.tooterCount() == 17);
          // If the program crashes after leaving this compound statement, you
          // are probably messing something up when you delete a Tooter after
          // it is converted (or you have mis-coded the destructor).
          //
          // Draw a picture of your m_tooters array before the Tooters are
          // preached to and also note the values of m_nTooters or any other
          // variables you might have that are involved with the number of
          // Tooters.  Trace through your code step by step as the Tooters
          // are preached to and removed, updating the picture according to
          // what the code says, not what you want it to do.  If you don't see
          // a problem then, try tracing through the destruction of the city.
          //
          // If you execute the code, use the debugger to check on the values
          // of key variables at various points.  If you didn't try to learn
          // to use the debugger, insert statements that write the values of
          // key variables to cerr so you can trace the execution of your code
          // and see the first place where something has gone amiss.  (Comment
          // out the call to clearScreen in City::display so that your output
          // doesn't disappear.)
    }
    cout &lt;&lt; "Passed all basic tests" &lt;&lt; endl;
}
</pre>


</body></html
